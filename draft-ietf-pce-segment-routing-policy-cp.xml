<?xml version="1.0" encoding="US-ASCII"?>
<!-- This template is for creating an Internet Draft using xml2rfc,
which is available here: http://xml.resource.org. -->
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- One method to get references from the online citation libraries.
There has to be one entity for each item to be referenced.
An alternate method (rfc include) is described in the references. -->

<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2629 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml">
<!ENTITY RFC3552 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3552.xml">
<!ENTITY I-D.narten-iana-considerations-rfc2434bis SYSTEM "http://xml.resource.org/public/rfc/bibxml3/reference.I-D.narten-iana-considerations-rfc2434bis.xml">
]>
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- used by XSLT processors -->
<!-- For a complete list and description of processing instructions (PIs),
please see http://xml.resource.org/authoring/README.html. -->
<!-- Below are generally applicable Processing Instructions (PIs) that most I-Ds might want to use.
(Here they are set differently than their defaults in xml2rfc v1.32) -->
<?rfc strict="yes" ?>
<!-- give errors regarding ID-nits and DTD validation -->
<!-- control the table of contents (ToC) -->
<?rfc toc="yes"?>
<!-- generate a ToC -->
<?rfc tocdepth="4"?>
<!-- the number of levels of subsections in ToC. default: 3 -->
<!-- control references -->
<?rfc symrefs="yes"?>
<!-- use symbolic references tags, i.e, [RFC2119] instead of [1] -->
<?rfc sortrefs="no" ?>
<!-- sort the reference entries alphabetically -->
<!-- control vertical white space
(using these PIs as follows is recommended by the RFC Editor) -->
<?rfc compact="yes" ?>
<!-- do not start each main section on a new page -->
<?rfc subcompact="no" ?>
<!-- keep one blank line between list items -->
<!-- end of list of popular I-D processing instructions -->
<rfc category="std" docName="draft-ietf-pce-segment-routing-policy-cp-20" ipr="trust200902" updates="8231">
<!-- category values: std, bcp, info, exp, and historic
ipr values: full3667, noModification3667, noDerivatives3667
you can add the attributes updates="NNNN" and obsoletes="NNNN"
they will automatically be output with "(if approved)" -->

<!-- ***** FRONT MATTER ***** -->

  <front>
    <title abbrev="PCEP SR Policy">
    Path Computation Element Communication Protocol (PCEP) Extensions for Segment Routing (SR) Policy Candidate Paths</title>

    <author fullname="Mike Koldychev" initials="M." surname="Koldychev">
      <organization>Ciena Corporation</organization>
      <address>
        <postal>
          <street>385 Terry Fox Dr.</street>
          <city>Kanata</city>
          <region>Ontario</region>
          <code>K2K 0L1</code>
          <country>Canada</country>
        </postal>
        <email>mkoldych@proton.me</email>
      </address>
    </author>

    <author fullname="Siva Sivabalan" initials="S." surname="Sivabalan">
      <organization>Ciena Corporation</organization>
      <address>
        <postal>
          <street>385 Terry Fox Dr.</street>
          <city>Kanata</city>
          <region>Ontario</region>
          <code>K2K 0L1</code>
          <country>Canada</country>
        </postal>
        <email>ssivabal@ciena.com</email>
      </address>
    </author>

    <author fullname="Samuel Sidor" initials="S." surname="Sidor">
      <organization>Cisco Systems, Inc.</organization>
      <address>
        <postal>
          <street>Eurovea Central 3.</street>
          <city>Bratislava</city>
          <code>811 09</code>
          <country>Slovakia</country>
        </postal>
        <email>ssidor@cisco.com</email>
      </address>
    </author>

    <author fullname="Colby Barth" initials="C." surname="Barth">
      <organization>Juniper Networks, Inc.</organization>
      <address>
        <email>cbarth@juniper.net</email>
      </address>
    </author>

    <author fullname="Shuping Peng" initials="S." surname="Peng">
      <organization>Huawei Technologies</organization>

       <address>
        <postal>
          <street>Huawei Campus, No. 156 Beiqing Rd.</street>

           <city>Beijing</city>

           <region/>

           <code>100095</code>

           <country>China</country>
        </postal>

         <phone/>

         <facsimile/>

         <email>pengshuping@huawei.com</email>

         <uri/>
      </address>
    </author>

    <author fullname="Hooman Bidgoli" initials="H." surname="Bidgoli">
      <organization>Nokia</organization>
      <address>
        <email>hooman.bidgoli@nokia.com</email>
      </address>
    </author>

    <date/>

    <workgroup>PCE Working Group</workgroup>

<abstract>

<t>
   Segment Routing (SR) allows a node to steer a packet flow along any
   path. SR Policy is an ordered list of segments (i.e.,
   instructions) that represent a source-routed policy.  Packet flows
   are steered into an SR Policy on a node where it is instantiated
   called a headend node. An SR Policy is made of one or more candidate
   paths.
</t>

<t>
   This document specifies the Path Computation Element Communication
   Protocol (PCEP) extension to signal candidate paths of the SR
   Policy.
   Additionally, this document updates RFC 8231 to allow
   stateful bring up of an SR Label Switched Path (LSP), without using
   the path computation request and reply messages.
   This document is applicable to both Segment Routing over MPLS (SR-MPLS) and
   Segment Routing over IPv6 (SRv6).
</t>

</abstract>

</front>

<middle>

<section anchor="Introduction" title="Introduction">

<t>Segment Routing Policy Architecture <xref target="RFC9256"/> details the concepts of SR Policy and approaches to steering traffic into an SR Policy.</t>

<t>PCEP Extensions for Segment Routing <xref target="RFC8664"/> specifies extensions to the Path Computation Element Protocol (PCEP) that allow a stateful PCE to compute and initiate Traffic Engineering (TE) paths, as well as a PCC to request a path subject to certain constraint(s) and optimization criteria in SR networks.
Although PCEP extensions introduced in <xref target="RFC8664"/> were originally used to create SR-TE tunnels, these are not SR Policies and lack many important features and details.
</t>

<t>PCEP Extensions for Establishing Relationships Between Sets of PCEP LSPs <xref target="RFC8697"/> introduces a generic mechanism to create a grouping of LSPs which is called an Association.</t>

<t>
This document extends <xref target="RFC8664"/> to support signaling SR Policy Candidate Paths as PCEP LSPs and to signal Candidate Path membership in
an SR Policy by means of the Association mechanism.
The PCEP Association corresponds to the SR Policy and the PCEP LSP corresponds to the Candidate Path.
The unit of signaling in PCEP is the LSP, thus all the information is carried at the Candidate Path level.
</t>

<t>This document updates Section 5.8.2 of <xref target="RFC8231"/>, making the PCReq message optional for LSPs set up using Path Setup Type 1 (Segment Routing) described in <xref target="RFC8664"/> and 3 (SRv6) described in <xref target="RFC9603"/>, allowing a PCC to delegate such LSP by sending a PCRpt without the preliminary PCReq and PCRep messages, with the aim of reducing the PCEP message exchanges and simplifying implementation.</t>

<section anchor="Language" title="Requirements Language">
      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
      NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED",
      "MAY", and "OPTIONAL" in this document are to be interpreted as
      described in BCP 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they
      appear in all capitals, as shown here.</t>
</section>
</section> <!-- Introduction -->

<section anchor="Terminology" title="Terminology">

<t>The following terminologies are used in this document:

  <list style="hanging">

     <t hangText="Endpoint:"> The IPv4 or IPv6 endpoint address of an SR Policy, as described in <xref target="RFC9256"/> Section 2.1.</t>

     <t hangText="Color:"> The 32-bit color of an SR Policy, as described in <xref target="RFC9256"/> Section 2.1.</t>

     <t hangText="Protocol-Origin:"> The protocol that was used to create the Candidate Path, as described in <xref target="RFC9256"/> Section 2.3.</t>

     <t hangText="Originator:"> Device that created the Candidate Path, as described in <xref target="RFC9256"/> Section 2.4.</t>

     <t hangText="Discriminator:"> Distinguishes Candidate Paths created by the same device, as described in <xref target="RFC9256"/> Section 2.5.</t>

     <t hangText="Association Parameters:"> As described in <xref target="RFC8697"/>, refers to the key data, that uniquely identifies the Association.</t>

     <t hangText="Association Information:"> As described in <xref target="RFC8697"/>, refers to the non-key information about the Association.</t>
	 
	 <t hangText="SR Policy LSP:"> An LSP set up using Path Setup Type 1 (Segment Routing) or 3 (SRv6).</t>
	 
          <t hangText="ASN:"> Autonomous System Number.</t>
          <t hangText="BSID:"> Binding Segment Identifier.</t>
          <t hangText="ENLP:"> Explicit Null Label Policy.</t>
		  <t hangText="IGP:"> Interior Gateway Protocol.</t>
          <t hangText="LSP:"> Label Switched Path.</t>
          <t hangText="MPLS:"> Multiprotocol Label Switching.</t>
          <t hangText="PCC:"> Path Computation Client.</t>
          <t hangText="PCE:"> Path Computation Element.</t>
          <t hangText="PCEP:"> Path Computation Element Protocol.</t>
          <t hangText="SID:"> Segment Identifier.</t>
          <t hangText="SR:"> Segment Routing.</t>
          <t hangText="SRPA:"> SR Policy Association. A new association type 'SR Policy
   Association' is used to group candidate paths belonging to the SR
   Policy. Depending on the discussion context, it can refer to the PCEP
   ASSOCIATION object of SR Policy type or to a group of LSPs that
   belong to the association.</t>
          <t hangText="SRPM:"> SR Policy Manager.</t>
          <t hangText="SR-TE:"> Segment Routing Traffic Engineering.</t>
          <t hangText="TE:"> Traffic Engineering.</t>
          <t hangText="TLV:"> Type-Length-Value.</t>
      </list>
</t>

</section> <!-- Terminology -->

<section anchor="Overview" title="Overview">

<t>
The SR Policy is represented by a new type of PCEP Association, called the SR Policy Association.
The SR Candidate Paths of an SR Policy are the PCEP LSPs within the same SRPA.
The subject of encoding multiple Segment Lists within an SR Policy Candidate Path is described in <xref target="I-D.ietf-pce-multipath"/>.
</t>

<t>The SRPA carries three pieces of information:
SR Policy Identifier, SR Policy Candidate Path Identifier, and SR Policy Candidate Path Attribute(s).</t>

<t>
This document also specifies some additional information that is not encoded as part of SRPA: Computation Priority, Explicit Null Label Policy and Drop-upon-invalid behavior.
</t>

<t>
This document does not propose any extension for the use of BSID with SR Policy; the existing behavior is documented in <xref target="RFC9604"/>.
</t>

<section anchor="SRPolicyIdentifier" title="SR Policy Identifier">
<t>SR Policy Identifier uniquely identifies the SR Policy <xref target="RFC9256"/> within the network.
SR Policy Identifier MUST be the same for all SR Policy Candidate Paths in the same SRPA.
SR Policy Identifier MUST be constant for a given SR Policy Candidate Path for the lifetime of the PCEP session.
SR Policy Identifier MUST be different for different SRPAs.
If the identifier is inconsistent among Candidate Paths, changes during the lifetime of the PCEP session, or is not unique across different SRPAs, the PCEP speaker MUST send a PCErr message with Error-Type = 26 "Association Error" and Error Value = 20 "SR Policy Identifier Mismatch".
SR Policy Identifier consist of:</t>
<t>
      <list style="symbols">
        <t>Headend router where the SR Policy originates.</t>
        <t>Color of SR Policy (<xref target="RFC9256"/> Section 2.1).</t>
        <t>Endpoint of SR Policy (<xref target="RFC9256"/> Section 2.1).</t>
      </list>
</t>
</section>

<section anchor="SRPolicyCandidatePathIdentifier" title="SR Policy Candidate Path Identifier">
<t>SR Policy Candidate Path Identifier uniquely identifies the SR Policy Candidate Path within the context of an SR Policy.
SR Policy Candidate Path Identifier MUST be constant for the lifetime of the PCEP session.
SR Policy Candidate Path Identifier MUST be different for distinct Candidate Paths within the same SRPA.
If an identifier changes during the lifetime of the PCEP session or is not unique among distinct Candidate Paths, the PCEP speaker MUST send a PCErr message with Error-Type = 26 "Association Error" and Error Value = 21 "SR Policy Candidate Path Identifier Mismatch".
SR Policy Candidate Path Identifier consist of:</t>
<t>
      <list style="symbols">
        <t>Protocol Origin (<xref target="RFC9256"/> Section 2.3).</t>
        <t>Originator (<xref target="RFC9256"/> Section 2.4).</t>
        <t>Discriminator (<xref target="RFC9256"/> Section 2.5).</t>
      </list>
</t>
</section>

<section anchor="SRPolicyCandidatePathAttributes" title="SR Policy Candidate Path Attributes">
<t>SR Policy Candidate Path Attributes carry optional, non-key information about the Candidate Path and MAY change during the lifetime of the LSP.
SR Policy Candidate Path Attributes consist of:</t>
<t>
      <list style="symbols">
        <t>Candidate Path preference.</t>
        <t>Candidate Path name.</t>
        <t>SR Policy name.</t>
      </list>
</t>
</section>

</section> <!-- Overview -->

<section anchor="Association" title="SR Policy Association">
<t>
   As per <xref target="RFC8697"/>, LSPs are associated with other LSPs with which they
   interact by adding them to a common association group.  As described
   in <xref target="RFC8697"/>, the association group is uniquely identified by the
   combination of the following fields in the ASSOCIATION object:
   Association Type, Association ID, Association Source, and (if
   present) Global Association Source or Extended Association ID,
   referred to as Association Parameters.
</t>
<t>
<xref target="RFC8697"/> specifies the ASSOCIATION Object with two Object-Types for IPv4 and IPv6 which includes the field "Association Type". This document defines a new Association type (6) "SR Policy Association" for SRPA.
</t>

<t>
<xref target="RFC8697"/> specifies the mechanism for the capability advertisement of
   the Association Types supported by a PCEP speaker by defining an
   ASSOC-Type-List TLV to be carried within an OPEN object. This
   capability exchange for the SR Policy Association Types MUST
   be done before using the SRPA.  Thus, the
   PCEP speaker MUST include the SRPA Type (6) in
   the ASSOC-Type-List TLV and MUST receive the same from the PCEP peer
   before using SRPA.
</t>

<t>
A given LSP MUST belong to at most one SRPA, since an SR Policy Candidate Path cannot belong to multiple SR Policies.
If a PCEP speaker receives a PCEP message requesting to join more than one SRPA for the same LSP,
then the PCEP speaker MUST send a PCErr message with
Error-Type = 26 "Association Error", Error-Value = 7 "Cannot join the association group".
</t>

<section anchor="AssociationParameters" title="Association Parameters">

<t>
As per <xref target="RFC9256"/>,
an SR Policy is identified through the tuple &#60;headend, color, endpoint&#62;.
The headend is encoded in the 'Association Source' field in the ASSOCIATION object.
The color and endpoint are encoded as part of the Extended Association ID TLV.
</t>

<t>The Association Parameters (see <xref target="Terminology"/>) consist of:</t>
<t>
      <list style="symbols">
        <t>Association Type: Part of the base ASSOCIATION object. Set to 6 "SR Policy Association".</t>
        <t>Association Source (IPv4/IPv6): Part of the base ASSOCIATION object. Set to the headend value of the SR Policy, as defined in <xref target="RFC9256"/> Section 2.1.</t>
        <t>Association ID (16-bit): Part of the base ASSOCIATION object. Always set to the numeric value "1". This 16-bit field does not store meaningful data, because neither the Color nor the Endpoint can fit in it.</t>
	<t>Extended Association ID TLV: Mandatory TLV of the ASSOCIATION object. Encodes the Color and Endpoint of the SR Policy.</t>
      </list>
</t>

<figure anchor="Extended-Association-ID-TLV-FORMAT" title="Extended Association ID TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |           Type = 31           |       Length = 8 or 20        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             Color                             |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  ~                           Endpoint                            ~
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: Extended Association ID TLV, type = 31 <xref target="RFC8697"/>.</t>

<t>Length: Either 8 or 20, depending on whether IPv4 or IPv6 address is encoded in the Endpoint field.</t>

<t>Color: SR Policy color value, non-zero as per <xref target="RFC9256"/> Section 2.1.</t>

<t>Endpoint: can be either IPv4 or IPv6.
This value MAY be different from the one contained in the Destination address field in the END-POINTS object, or in the Tunnel Endpoint Address field in the LSP-IDENTIFIERS TLV.</t>

<t>If the PCEP speaker receives an SRPA object
whose Association Parameters do not follow the above specification,
then the PCEP speaker MUST send a PCErr message with
Error-Type = 26 "Association Error", Error-Value = 20 "SR Policy Identifier Mismatch".</t>

<t>The purpose of choosing the Association Parameters in this way is to guarantee that there is no possibility of a race condition when multiple PCEP speakers want to associate the same SR Policy at the same time. By adhering to this format, all PCEP speakers come up with the same Association Parameters independently of each other based on the SR Policy <xref target="RFC9256"/> parameters. Thus, there is no chance that different PCEP speakers will come up with different Association Parameters for the same SR Policy.</t>

<t>
The last hop of the computed SR Policy Candidate Path MAY differ from the Endpoint contained in the &#60;headend, color, endpoint&#62; tuple.
An example use case is to terminate the SR Policy before reaching the Endpoint and have decapsulated traffic go the rest of the way to the Endpoint node using the native IGP path(s).
In this example, the destination of the SR Policy Candidate Paths will be some node before the Endpoint, but the Endpoint value is still used at the head-end to steer traffic with that Endpoint IP into the SR Policy.
The Destination of the SR Policy Candidate Path is signaled using the END-POINTS object and/or LSP-IDENTIFIERS TLV, as per the usual PCEP procedures.
When neither the END-POINTS object nor LSP-IDENTIFIERS TLV is present,
the PCEP speaker MUST extract the destination from the Endpoint field in the SRPA Extended Association ID TLV.
</t>

<t>
SR Policy with Color-Only steering is signaled with the End-Point value set to null, i.e., 0.0.0.0 for IPv4 or :: for IPv6, see <xref target="RFC9256"/> Section 8.8.1.
</t>

</section> <!-- AssociationParameters -->

<section anchor="AssociationInformation" title="Association Information">

<t>The SRPA object may carry the following TLVs:</t>

<t>
      <list style="symbols">
        <t>SRPOLICY-POL-NAME TLV: (optional) encodes SR Policy Name string.</t>
        <t>SRPOLICY-CPATH-ID TLV: (mandatory) encodes SR Policy Candidate Path Identifier.</t>
        <t>SRPOLICY-CPATH-NAME TLV: (optional) encodes SR Policy Candidate Path string name.</t>
        <t>SRPOLICY-CPATH-PREFERENCE TLV: (optional) encodes SR Policy Candidate Path preference value.</t>
      </list>
</t>

<t>Out of these TLVs, the SRPOLICY-CPATH-ID TLV is mandatory, all others are optional.
When a mandatory TLV is missing from the SRPA object, the PCEP speaker MUST send a PCErr message with
Error-Type = 6 "Mandatory Object Missing", Error-Value = 21 "Missing SR Policy Mandatory TLV".</t>

<t>This document specifies four new TLVs to be carried in the SRPA object. Only one TLV instance of each type can be carried, and only the first occurrence is processed.  Any others MUST be ignored.</t>

<section anchor="Policy-name-tlv" title="SR Policy Name TLV">

<t>
The SRPOLICY-POL-NAME TLV is an optional TLV for the SRPA object.
</t>

<figure anchor="SRPOLICY-POL-NAME-TLV-FORMAT" title="The SRPOLICY-POL-NAME TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  ~                       SR Policy Name                          ~
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 56 for "SRPOLICY-POL-NAME" TLV.</t>

<t>Length: indicates the length of the value portion of the TLV in octets and MUST be greater than 0. The TLV MUST be zero-padded so that the TLV is 4-octet aligned.</t>

<t>SR Policy Name: SR Policy name, as defined in <xref target="RFC9256"/>. It MUST be a string of printable ASCII characters, without a NULL terminator.</t>

</section> <!-- Policy-name-tlv -->

<section anchor="Cpath-identifier-tlv" title="SR Policy Candidate Path Identifier TLV">

<t>
The SRPOLICY-CPATH-ID TLV is a mandatory TLV for the SRPA object.
</t>

<figure anchor="SRPOLICY-CPATH-ID-TLV-FORMAT" title="The SRPOLICY-CPATH-ID TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  | Proto. Origin |                 Reserved                      |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                         Originator ASN                        |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  |                       Originator Address                      |
  |                                                               |
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                         Discriminator                         |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 57 for "SRPOLICY-CPATH-ID" TLV.</t>

<t>Length: 28.</t>

<t>Protocol Origin: 8-bit value that encodes the protocol origin, as specified in <xref target="protocol_origin"/>.
Note that in the PCInitiate message <xref target="RFC8281"/>, the Protocol Origin is always set to 10 (PCEP reported via PCE/PCEP). The "SR Policy Protocol Origin" IANA registry includes a combination of values intended for use in PCEP and BGP-LS. When the registry contains two variants of values associated with the mechanism or protocol used for provisioning of the Candidate Path, for example 1 (PCEP) and 10 (PCEP reported via PCE/PCEP), the "reported via PCE" variants MUST be used in PCEP.</t>

<t>Reserved: This field MUST be set to zero on transmission and MUST be ignored on receipt.</t>

<t>Originator ASN: Represented as a 4-byte number, part of the originator identifier, as specified in <xref format="default" section="2.4" sectionFormat="of" target="RFC9256"/>.
When sending a PCInitiate message <xref target="RFC8281"/>, the PCE is the originator of the Candidate Path.
AS number is not a PCE concept and PCE is not required to have one for itself.
If the PCE has its AS number, then it MUST set it, otherwise the AS number can be set to 0.
</t>

<t>Originator Address: Represented as a 128-bit value as specified in <xref format="default" section="2.4" sectionFormat="of" target="RFC9256"/>. When sending a PCInitiate message, the PCE is acting as the originator and therefore MUST set this to an address that it owns.
</t>

<t>Discriminator: 32-bit value that encodes the Discriminator of the Candidate Path, as specified in <xref target="RFC9256"/> Section 2.5.
This is the field that mainly distinguishes different SR Candidate Paths, coming from the same originator. It is allowed to be any number in the 32-bit range.
</t>

</section> <!-- Cpath-identifier-tlv -->

<section anchor="SRPOLICY-CPATH-NAME" title="SR Policy Candidate Path Name TLV">

<t>
The SRPOLICY-CPATH-NAME TLV is an optional TLV for the SRPA object.
</t>

<figure anchor="SRPOLICY-CPATH-NAME-TLV-FORMAT" title="The SRPOLICY-CPATH-NAME TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                                                               |
  ~                 SR Policy Candidate Path Name                 ~
  |                                                               |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 58 for "SRPOLICY-CPATH-NAME" TLV.</t>

<t>Length: indicates the length of the value portion of the TLV in octets and MUST be greater than 0. The TLV MUST be zero-padded so that the TLV is 4-octet aligned.</t>

<t>SR Policy Candidate Path Name: SR Policy Candidate Path Name, as defined in <xref target="RFC9256"/>. It MUST be a string of printable ASCII characters, without a NULL terminator.</t>

</section> <!-- SRPOLICY-CPATH-NAME -->

<section anchor="Cpath-preference-tlv" title="SR Policy Candidate Path Preference TLV">

<t>
The SRPOLICY-CPATH-PREFERENCE TLV is an optional TLV for the SRPA object.
If the TLV is absent, then default Preference value is 100, as per Section 2.7 of <xref target="RFC9256"/>.
</t>

<figure anchor="SRPOLICY-CPATH-PREFERENCE-TLV-FORMAT" title="The SRPOLICY-CPATH-PREFERENCE TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                           Preference                          |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 59 for "SRPOLICY-CPATH-PREFERENCE" TLV.</t>

<t>Length: 4.</t>

<t>Preference: Numerical preference of the Candidate Path as defined in Section 2.7 of <xref target="RFC9256"/>.</t>

</section> <!-- Cpath-preference-tlv -->

</section> <!-- AssociationInformation -->

</section> <!-- Association -->

<section anchor="Other-mechanisms" title="Other Mechanisms">

<t>This section describes mechanisms that are standardized
for SR Policies in <xref target="RFC9256"/>,
but do not make use of the SRPA for signaling in PCEP.
Since SRPA is not used, there needs to be a separate capability
negotiation.</t>

<t>
   This document specifies four new TLVs to be carried in the OPEN or LSP object.
   Only one TLV instance of each type can be carried, and only the first
   occurrence is processed.  Any others MUST be ignored.
</t>

<section anchor="Capability-tlv" title="SR Policy Capability TLV">

<t>
The SRPOLICY-CAPABILITY TLV is a TLV for the OPEN object.
It is used at session establishment to learn the peer's
capabilities with respect to SR Policy.
Implementations that support SR Policy MUST include SRPOLICY-CAPABILITY TLV in the OPEN object.
In addition, the ASSOC-Type-List TLV containing SRPA Type (6) MUST be present in the OPEN object, as specified in <xref target="Association"/>.</t>

<t>If a PCEP speaker receives SRPA but the SRPOLICY-CAPABILITY TLV is
not exchanged, then the PCEP speaker MUST send a PCErr message with Error-
Type = 10 ("Reception of an invalid object") and Error-Value = TBD
("Missing SRPOLICY-CAPABILITY TLV") and MUST then close the PCEP
session.</t>

<figure anchor="SRPOLICY-CAPABILITY-TLV-FORMAT" title="The SRPOLICY-CAPABILITY TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                             Flags                   |L| |I|E|P|
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 71 for "SRPOLICY-CAPABILITY TLV.</t>

<t>Length: 4.</t>

<t>P-flag (Computation Priority): If set to '1' by a PCEP speaker, the P flag indicates that the PCEP speaker supports the handling of COMPUTATION-PRIORITY TLV for the SR Policy,
see <xref target="Computation-priority-tlv"/>.
If this flag is not set, then the PCEP speaker MUST NOT send the COMPUTATION-PRIORITY TLV and MUST ignore it on receipt.
</t>

<t>E-Flag (Explicit NULL Label Policy): If set to '1' by a PCEP speaker, the E flag indicates that the PCEP speaker supports the handling of ENLP TLV for the SR Policy,
  see <xref target="enlp-tlv"/>.
If this flag is not set, then the PCEP speaker MUST NOT send the ENLP TLV and MUST ignore it on receipt.
</t>

<t>I-Flag (Invalidation): If set to '1' by a PCEP speaker, the I flag indicates that the PCEP speaker supports the handling of INVALIDATION TLV for the SR Policy,
  see <xref target="Invalidation-tlv"/>.
If this flag is not set, then the PCEP speaker MUST NOT send the INVALIDATION TLV and MUST ignore it on receipt.
</t>

<t>L-Flag (Stateless Operation): If set to '1' by a PCEP speaker, the L flag indicates that the PCEP speaker supports the stateless (PCReq/PCRep) operations for the SR Policy,
  see <xref target="Stateless-oper"/>.
  If the PCE did not set this flag then the PCC MUST NOT send PCReq messages to this PCE for the SR Policy.
</t>

<t>Unassigned bits MUST be set to '0' on transmission and MUST be ignored on receipt.</t>

</section> <!-- Capability-tlv -->

<section anchor="Computation-priority-tlv" title="Computation Priority TLV">

<t>The COMPUTATION-PRIORITY TLV is an optional TLV for the LSP object.
It is used to signal the numerical computation priority, as specified in Section 2.12 of <xref target="RFC9256"/>.
If the TLV is absent from the LSP object and the P-flag in the SRPOLICY-CAPABILITY TLV is set to 1, a default Priority value of 128 is used.</t>

<figure anchor="COMPUTATION-PRIORITY-TLV-FORMAT" title="The COMPUTATION-PRIORITY TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    Priority    |                  Reserved                    |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 68 for "COMPUTATION-PRIORITY" TLV.</t>

<t>Length: 4.</t>

<t>Priority: Numerical priority with which this LSP is to be recomputed by the PCE upon topology change. Lowest value is the highest priority. The default value of priority is 128 (if this TLV is absent), see Section 2.12 of <xref target="RFC9256"/>.</t>

<t>Reserved: This field MUST be set to zero on transmission and MUST be ignored on receipt.</t>

</section> <!-- Computation-priority-tlv -->

<section anchor="enlp-tlv" title="Explicit Null Label Policy (ENLP) TLV">

<t>
    To steer an unlabeled IP packet into an SR policy, it is necessary to create a label stack for that packet, and push one or more labels onto that stack.
    The Explicit NULL Label Policy (ENLP) TLV is an optional TLV for the LSP object used to indicate whether an Explicit NULL Label <xref target="RFC3032"/> must be pushed on an unlabeled IP packet before any other labels.
    The contents of this TLV are used by the SRPM as described in section 4.1 of <xref target="RFC9256"/>.
    If an ENLP TLV is not present, the decision of whether to push an Explicit NULL label on a given packet is a matter of local configuration.
Note that Explicit Null is currently only defined for SR MPLS and not for SRv6. Therefore the PCEP speaker MUST ignore the presence of this TLV for SRv6 Policies.
</t>

<figure anchor="ENLP-TLV-FORMAT" title="The Explicit Null Label Policy (ENLP) TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |    ENLP        |                  Reserved                    |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 69 for "ENLP" TLV.</t>

<t>Length: 4.</t>

<t>
  ENLP (Explicit NULL Label Policy): Indicates whether Explicit NULL labels are to be pushed on unlabeled IP packets
  that are being steered into a given SR policy.
  The values of this field are specified in section <xref target="enlp_value"/>.
</t>

<t>Reserved: This field MUST be set to zero on transmission and MUST be ignored on receipt.</t>

<t>
    The ENLP reserved values may be used for future extensions and implementations MUST ignore the ENLP TLV with these values.
    The behavior signaled in this TLV MAY be overridden by local configuration.
    Section 4.1 of <xref target="RFC9256"/> describes the behavior on the headend for the handling of the explicit null label.
</t>

</section> <!-- enlp-tlv -->

<section anchor="Invalidation-tlv" title="Invalidation TLV">

<t>The INVALIDATION TLV is an optional TLV for the LSP object.
It is used to control traffic steering into the LSP
when the LSP is operationally down/invalid.
In the context of SR Policy, this TLV facilitates
the Drop-upon-invalid behavior,
specified in Section 8.2 of <xref target="RFC9256"/>.
Normally, if the LSP is down/invalid then it stops attracting traffic and
traffic that would have been destined for that LSP
is redirected somewhere else, such as via IGP or another LSP.
The Drop-upon-invalid behavior specifies that the LSP keeps attracting traffic
and the traffic has to be dropped at the head-end.
Such an LSP is said to be "in drop state".
While in the drop state, the LSP operational state is "UP",
as indicated by the O-flag in the LSP object.
However, the ERO object MAY be empty, if no valid path has been computed.
</t>
<t>
The INVALIDATION TLV is used in both directions between PCEP peers:
  <list style="symbols">
    <t>PCE -> PCC: PCE specifies to the PCC whether to enable or disable Drop-upon-invalid (Config).</t>
    <t>PCC -> PCE: PCC reports the current setting of the Drop-upon-invalid (Config) and also whether the LSP is currently in the drop state (Oper).</t>
  </list>
</t>

<figure anchor="INVALIDATION-TLV-FORMAT" title="The INVALIDATION TLV format">
<artwork align="center"><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |             Type              |             Length            |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |   Oper        |   Config      |            Reserved           |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>Type: 70 for "INVALIDATION" TLV.</t>

<t>Length: 4.</t>

<t>Oper: encodes the current state of
the LSP, i.e., whether it is actively dropping traffic right now.
This field can be set to non-zero values only by the PCC,
it MUST be set to 0 by the PCE and MUST be ignored by the PCC.
See Section <xref target="inval_oper_iana"/> for IANA information.
</t>

<figure anchor="OPER_INVAL_FLAGS" title="Oper state of Drop-upon-invalid feature">
<artwork align="center"><![CDATA[
   0 1 2 3 4 5 6 7
  +-+-+-+-+-+-+-+-+
  |             |D|
  +-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>
  <list style="symbols">
    <t>D: dropping - the LSP is currently attracting traffic and actively dropping it.</t>
    <t>The unassigned bits in the Flag octet MUST be set to zero upon transmission and MUST be ignored upon receipt.</t>
  </list>
</t>

<t>Config: encodes the current setting of the Drop-upon-invalid feature.
See Section <xref target="inval_config_iana"/> for IANA information.
</t>

<figure anchor="CONFIG_INVAL_FLAGS" title="Config state of Drop-upon-invalid feature">
<artwork align="center"><![CDATA[
   0 1 2 3 4 5 6 7
  +-+-+-+-+-+-+-+-+
  |             |D|
  +-+-+-+-+-+-+-+-+
]]></artwork>
</figure>

<t>
  <list style="symbols">
    <t>D: drop enabled - the Candidate Path has Drop-upon-invalid feature enabled.</t>
    <t>The unassigned bits in the Flag octet MUST be set to zero upon transmission and MUST be ignored upon receipt.</t>
  </list>
</t>

<t>Reserved: This field MUST be set to zero on transmission and MUST be ignored on receipt.</t>

<section anchor="Invalidation-per-policy" title="Drop-upon-invalid applies to SR Policy">

<t>
The Drop-upon-invalid feature is somewhat special among the other SR Policy features in the way that it is enabled/disabled.
This feature is enabled only on the whole SR Policy, not on a particular Candidate Path of that SR Policy,
i.e., when any Candidate Path has Drop-upon-invalid enabled, it means that the whole SR Policy has the feature enabled.
As stated in <xref target="RFC9256"/> Section 8.1, the SR Policy is invalid when all its Candidate Paths are invalid.
</t>

<t>
Once all the Candidate Paths of the SR Policy have become invalid, then the SR Policy checks whether any of the Candidate Paths
have Drop-upon-invalid enabled.
If so, SR Policy enters the drop state and "activates" the highest preference Candidate Path which has
the Drop-upon-invalid enabled.
Note that only one Candidate Path needs to be reported to the PCE with the D (dropping) flag set.
</t>

</section> <!-- Invalidation-per-policy -->

</section> <!-- Invalidation-tlv -->

<section anchor="Stateless-oper" title="Update to RFC 8231">

<t>
<xref target="RFC8231"/> Section 5.8.2, allows delegation of an LSP in operationally down state,
but at the same time mandates the use of PCReq before sending PCRpt.
This document updates <xref target="RFC8231"/> Section 5.8.2,
by making this section not applicable to SR Policy LSPs.
Thus, when a PCC wants to delegate an SR Policy LSP, it MAY proceed directly to sending PCRpt,
without first sending PCReq and waiting for PCRep.
This has the advantage of reducing the number of PCEP messages and simplifying the implementation.
</t>

<t>
Furthermore, a PCEP speaker is not required to support PCReq/PCRep at all for SR Policies.
The PCEP speaker can indicate support for PCReq/PCRep via the "L-Flag" in
the SRPOLICY-CAPABILITY TLV (See <xref target="Capability-tlv"/>).
When this flag is cleared, or when the SRPOLICY-CAPABILITY TLV is absent,
the given peer MUST NOT be sent PCReq/PCRep messages for SR Policy LSPs.
Conversely, when this flag is set, the peer can receive and process
PCReq/PCRep messages for SR Policy LSPs.
</t>

<t>
The above applies only to SR Policy LSPs and does not affect other LSP types,
such as RSVP-TE LSPs. For other LSP types, <xref target="RFC8231"/> Section 5.8.2
continues to apply.
</t>

</section> <!-- Stateless-oper -->

</section> <!-- Other mechanisms -->

<section title="IANA Considerations">

<section title="Association Type">
<t>This document defines a new association type: SR Policy Association.
IANA is requested to confirm the following allocation in the
"ASSOCIATION Type Field" registry <xref target="RFC8697"/> within
the "Path Computation Element Protocol (PCEP) Numbers" registry group:</t>
<t>
<figure>
        <artwork align="left"><![CDATA[
+-----------+-------------------------------------------+-----------+
| Type      | Name                                      | Reference |
+-----------+-------------------------------------------+-----------+
| 6         | SR Policy Association                     | This.I-D  |
+-----------+-------------------------------------------+-----------+
]]></artwork>
      </figure>
</t>
</section>

<section title="PCEP TLV Type Indicators">
<t>This document defines eight new TLVs for carrying additional information about SR Policy and SR Candidate Paths. IANA is requested to confirm the following allocations in the existing "PCEP TLV Type Indicators" registry as follows:</t>
<t>
<figure>
        <artwork align="left"><![CDATA[
+-----------+-------------------------------------------+-----------+
| Value     | Description                               | Reference |
+-----------+-------------------------------------------+-----------+
| 56        | SRPOLICY-POL-NAME                         | This.I-D  |
+-----------+-------------------------------------------+-----------+
| 57        | SRPOLICY-CPATH-ID                         | This.I-D  |
+-----------+-------------------------------------------+-----------+
| 58        | SRPOLICY-CPATH-NAME                       | This.I-D  |
+-----------+-------------------------------------------+-----------+
| 59        | SRPOLICY-CPATH-PREFERENCE                 | This.I-D  |
+-----------+-------------------------------------------+-----------+
| 68        | COMPUTATION-PRIORITY                      | This.I-D  |
+-----------+-------------------------------------------+-----------+
| 69        | EXPLICIT-NULL-LABEL-POLICY                | This.I-D  |
+-----------+-------------------------------------------+-----------+
| 70        | INVALIDATION                              | This.I-D  |
+-----------+-------------------------------------------+-----------+
| 71        | SRPOLICY-CAPABILITY                       | This.I-D  |
+-----------+-------------------------------------------+-----------+
]]></artwork>
      </figure>
</t>
</section>

<section title="PCEP Errors">
<t>This document defines one new Error-Value within the "Mandatory Object Missing" Error-Type, two new Error-Values within the "Association Error" Error-Type and one new Error-Value within the "Reception of an invalid object". </t>
<t>IANA is requested to confirm the following allocations within the "PCEP-ERROR Object Error Types and Values" registry of the "Path Computation Element Protocol (PCEP) Numbers" registry group.</t>
<t>
<figure>
        <artwork align="left"><![CDATA[
+------------+------------------+-----------------------+-----------+
| Error-Type | Meaning          | Error-value           | Reference |
+------------+------------------+-----------------------+-----------+
| 6          | Mandatory Object |                       | [RFC5440] |
|            | Missing          |                       |           |
+------------+------------------+-----------------------+-----------+
|            |                  | 21: Missing SR        | This.I-D  |
|            |                  | Policy Mandatory TLV  |           |
+------------+------------------+-----------------------+-----------+
| 26         | Association      |                       | [RFC8697] |
|            | Error            |                       |           |
+------------+------------------+-----------------------+-----------+
|            |                  | 20: SR Policy         | This.I-D  |
|            |                  | Identifers Mismatch   |           |
+------------+------------------+-----------------------+-----------+
|            |                  | 21: SR Policy         | This.I-D  |
|            |                  | Candidate Path        |           |
|            |                  | Identifier Mismatch   |           |
+------------+------------------+-----------------------+-----------+

]]></artwork>
      </figure></t>

<t>IANA is requested to make new allocations within the "PCEP-ERROR Object Error Types and Values" registry of the "Path Computation Element Protocol (PCEP) Numbers" registry group.</t>

<t><figure>
        <artwork align="left"><![CDATA[
+------------+------------------+-----------------------+-----------+
| Error-Type | Meaning          | Error-value           | Reference |
+------------+------------------+-----------------------+-----------+
| 10         | Reception of an  |                       | [RFC5440] |
|            | invalid object   |                       |           |
+------------+------------------+-----------------------+-----------+
|            |                  | TBA: Missing          | This.I-D  |
|            |                  | SRPOLICY-CAPABILITY   |           |
|            |                  | TLV                   |           |
+------------+------------------+-----------------------+-----------+

]]></artwork>
      </figure>
</t>
</section>

<section title="TE-PATH-BINDING TLV Flag field">
<t>
An earlier version of this document added new bit within the "TE-PATH-BINDING TLV Flag field" registry of the "Path Computation Element Protocol (PCEP) Numbers" registry group, which was also early allocated by the IANA.</t>
<t>
IANA is requested to cancel the early allocation made which is not needed anymore.  As per the instructions from the chairs, please mark it as deprecated.</t>
<t>
<figure>
        <artwork align="left"><![CDATA[
+------------+------------------------------------------+-----------+
| Bit position | Description                            | Reference |
+--------------+----------------------------------------+-----------+
| 1            | Deprecated (Specified-BSID-only)       | This.I-D  |
+--------------+----------------------------------------+-----------+

]]></artwork>
      </figure>
</t>
</section>

<section anchor="protocol_origin" title="SR Policy Candidate Path Protocol Origin field">
<t>
[Note to IANA: The new registry creation request below is also present in the draft-ietf-idr-bgp-ls-sr-policy. IANA is requested to process the registry creation via the first of these two documents to reach the publication stage and the authors of the other document would update the IANA considerations suitably. Note that draft-ietf-idr-bgp-ls-sr-policy allocates different values in BGP.]
[Note to RFC-Editor: Please remove the above and this note before publication.]
</t>
<t>
This document requests IANA to maintain a new registry under "Segment Routing" registry group.
The new registry is called "SR Policy Protocol Origin".
New values are to be assigned by "Expert Review" <xref target="RFC8126"/>
using the guidelines for Designated Experts as specified in <xref target="RFC9256"/>.
The registry contains the following codepoints:
</t>
<figure>
        <artwork align="left">
<![CDATA[
+---------+--------------------------------------+-----------+
|  Code   |                                      |           |
|  Point  |  Protocol Origin                     | Reference |
+---------+--------------------------------------+---------- +
|   0     | Reserved (not to be used)            | This.I-D  |
|   1     | PCEP                                 | This.I-D  |
|   2     | BGP SR Policy                        | This.I-D  |
|   3     | Configuration (CLI, YANG model via   | This.I-D  |
|         | NETCONF, etc.)                       | This.I-D  |
|   4-9   | Unassigned                           | This.I-D  |
|   10    | PCEP reported via PCE/PCEP           | This.I-D  |
|  11-19  | Unassigned                           | This.I-D  |
|   20    | BGP SR Policy reported via PCE/PCEP  | This.I-D  |
|  21-29  | Unassigned                           | This.I-D  |
|   30    | Configuration (CLI, YANG model via   | This.I-D  |
|         | NETCONF, etc.) reported via PCE/PCEP | This.I-D  |
|  31-250 | Unassigned                           | This.I-D  |
| 251-255 | Private Use (not to be assigned by   | This.I-D  |
|         | IANA                                 | This.I-D  |
+---------+--------------------------------------+-----------+
]]></artwork>
      </figure>
</section>

<section anchor="enlp_value" title="SR Policy Explicit Null Label Policy field">
<t>
[Note to IANA: The new registry creation request below is also present in the draft-ietf-idr-sr-policy-safi. IANA is requested to process the registry creation via the first of these two documents to reach the publication stage and the authors of the other document would update the IANA considerations suitably.]
[Note to RFC-Editor: Please remove the above and this note before publication.]
</t>
<t>
This document requests IANA to maintain a new registry under "Segment Routing" registry group with the allocation policy of "Standards Action" <xref target="RFC8126"/>.
The new registry is called "SR Policy ENLP Values" and contains the codepoints allocated to the "ENLP" field defined in Section 5.3.
The registry contains the following codepoints, with initial values, to be assigned by IANA with the reference set to this document:</t>
<figure>
        <artwork align="left"><![CDATA[
+----------+--------------------------------------------+-----------+
| Value    | Description                                | Reference |
+----------+--------------------------------------------+-----------+
| 0        | Reserved (not to be used).                 | This.I-D  |
+----------+--------------------------------------------+-----------+
| 1        | Push an IPv4 Explicit NULL label on an     | This.I-D  |
|          | unlabeled IPv4 packet, but do not push an  |           |
|          | IPv6 Explicit NULL label on an unlabeled   |           |
|          | IPv6 packet.                               |           |
+----------+--------------------------------------------+-----------+
| 2        | Push an IPv6 Explicit NULL label on an     | This.I-D  |
|          | unlabeled IPv6 packet, but do not push an  |           |
|          | IPv4 Explicit NULL label on an unlabeled   |           |
|          | IPv4 packet.                               |           |
+----------+--------------------------------------------+-----------+
| 3        | Push an IPv4 Explicit NULL label on an     | This.I-D  |
|          | unlabeled IPv4 packet, and push an IPv6    |           |
|          | Explicit NULL label on an unlabeled IPv6   |           |
|          | packet.                                    |           |
+----------+--------------------------------------------+-----------+
| 4        | Do not push an Explicit NULL label.        | This.I-D  |
+----------+--------------------------------------------+-----------+
| 5 - 255  | Unassigned                                 | This.I-D  |
+----------+--------------------------------------------+-----------+
]]></artwork>
      </figure>
</section>

<section anchor="inval_oper_iana" title="SR Policy Invalidation Operational State">
<t>
This document requests IANA to maintain a new registry under "Path Computation Element Protocol (PCEP) Numbers" registry group.
The new registry is called "SR Policy Invalidation Operational Flags".
New values are to be assigned by "IETF review" <xref target="RFC8126"/>.
Each bit should be tracked with the following qualities:
  <list style="symbols">
  <t>Bit (counting from bit 0 as the most significant bit).</t>
  <t>Description.</t>
  <t>Reference.</t>
  </list>
</t>
<figure>
        <artwork align="left"><![CDATA[
+-------+-----------------------------------------------+-----------+
| Bit   | Description                                   | Reference |
+-------+-----------------------------------------------+-----------+
| 0 - 6 | Unassigned                                    | This.I-D  |
+-------+-----------------------------------------------+-----------+
| 7     | D: dropping - the LSP is currently attracting | This.I-D  |
|       | traffic and actively dropping it.             |           |
+-------+-----------------------------------------------+-----------+
]]></artwork>
      </figure>
</section>

<section anchor="inval_config_iana" title="SR Policy Invalidation Configuration State">
<t>
This document requests IANA to maintain a new registry under "Path Computation Element Protocol (PCEP) Numbers" registry group.
The new registry is called "SR Policy Invalidation Configuration Flags".
New values are to be assigned by "IETF review" <xref target="RFC8126"/>.
Each bit should be tracked with the following qualities:
  <list style="symbols">
  <t>Bit (counting from bit 0 as the most significant bit).</t>
  <t>Description.</t>
  <t>Reference.</t>
  </list>
</t>
<figure>
        <artwork align="left"><![CDATA[
+-------+-----------------------------------------------+-----------+
| Bit   | Description                                   | Reference |
+-------+-----------------------------------------------+-----------+
| 0 - 6 | Unassigned.                                   | This.I-D  |
+-------+-----------------------------------------------+-----------+
| 7     | D: drop enabled - the Drop-upon-invalid is    | This.I-D  |
|       | enabled on the LSP.                           |           |
+-------+-----------------------------------------------+-----------+
]]></artwork>
      </figure>
</section>

<section anchor="sr_policy_cap_flag_field" title="SR Policy Capability TLV Flag field">
<t>
This document requests IANA to maintain a new registry under "Path Computation Element Protocol (PCEP) Numbers" registry group.
The new registry is called "SR Policy Capability TLV Flag Field".
New values are to be assigned by "IETF review" <xref target="RFC8126"/>.
Each bit should be tracked with the following qualities:
  <list style="symbols">
  <t>Bit (counting from bit 0 as the most significant bit).</t>
  <t>Description.</t>
  <t>Reference.</t>
  </list>
</t>
<figure>
        <artwork align="left"><![CDATA[
+--------+-----------------------------------------------+-----------+
| Bit    | Description                                   | Reference |
+--------+-----------------------------------------------+-----------+
| 0 - 26 | Unassigned                                    | This.I-D  |
+--------+-----------------------------------------------+-----------+
| 27     | Stateless Operation                           | This.I-D  |
+--------+-----------------------------------------------+-----------+
| 28     | Unassigned                                    | This.I-D  |
+--------+-----------------------------------------------+-----------+
| 29     | Invalidation                                  | This.I-D  |
+--------+-----------------------------------------------+-----------+
| 30     | Explicit NULL Label Policy                    | This.I-D  |
+--------+-----------------------------------------------+-----------+
| 31     | Computation Priority                          | This.I-D  |
+--------+-----------------------------------------------+-----------+

]]></artwork>
      </figure>
</section>

</section>

<section  title="Implementation Status">
      <t>[Note to the RFC Editor - remove this section before publication, as
      well as remove the reference to RFC 7942.]</t>

      <t>This section records the status of known implementations of the
      protocol defined by this specification at the time of posting of this
      Internet-Draft, and is based on a proposal described in <xref
      target="RFC7942"/>. The description of implementations in this section
      is intended to assist the IETF in its decision processes in progressing
      drafts to RFCs. Please note that the listing of any individual
      implementation here does not imply endorsement by the IETF. Furthermore,
      no effort has been spent to verify the information presented here that
      was supplied by IETF contributors. This is not intended as, and must not
      be construed to be, a catalog of available implementations or their
      features. Readers are advised to note that other implementations may
      exist.</t>


      <t>According to <xref target="RFC7942"/>, "this will allow reviewers and
      working groups to assign due consideration to documents that have the
      benefit of running code, which may serve as evidence of valuable
      experimentation and feedback that have made the implemented protocols
      more mature. It is up to the individual working groups to use this
      information as they see fit".</t>

      <section anchor="Cisco" title="Cisco">
        <t><list style="symbols">
            <t>Organization: Cisco Systems</t>

            <t>Implementation: IOS-XR PCC and PCE.</t>

            <t>Description: All features supported except Computation Priority, Explicit NULL and Invalidation Drop.</t>

            <t>Maturity Level: Production.</t>

            <t>Coverage: Full.</t>

            <t>Contact: ssidor@cisco.com</t>
          </list></t>
      </section>

      <section anchor="Juniper" title="Juniper">
        <t><list style="symbols">
            <t>Organization: Juniper Networks</t>

            <t>Implementation: PCC and PCE.</t>

            <t>Description: Everything in -05 except SR Policy Name TLV and SR Policy Candidate Path Name TLV.</t>

            <t>Maturity Level: Production.</t>

            <t>Coverage: Partial.</t>

            <t>Contact: cbarth@juniper.net</t>
          </list></t>
      </section>

</section>

<section  title="Security Considerations">
  <t>The information carried in the newly defined SRPA object and TLVs
  could provide an eavesdropper with additional information about the
  SR Policy.
  </t>
  <t>
  The security considerations described in <xref target="RFC5440"/>,
  <xref target="RFC8231"/>, <xref target="RFC8281"/>, <xref target="RFC8664"/>, <xref target="RFC8697"/>, <xref target="RFC9256"/> and <xref target="RFC9603"/> are applicable to this specification.
  </t>
  
  <t>As per <xref target="RFC8231"/>, it is RECOMMENDED that these PCEP extensions can only be activated on authenticated and encrypted sessions across PCEs and PCCs belonging to the same administrative authority, using Transport Layer Security (TLS) <xref target="RFC8253"/> as per the recommendations and best current practices in <xref target="RFC9325"/>.</t>
</section>
<section title="Manageability Considerations" numbered="true" toc="default">
  <t>All manageability requirements and considerations listed in <xref target="RFC5440"/>, <xref target="RFC8231"/>, <xref target="RFC8664"/>, <xref target="RFC9256"/> and <xref target="RFC9603"/> apply to PCEP protocol extensions defined in this document. In addition, requirements and considerations listed in this section apply.</t>
  <section title="Control of Function and Policy" numbered="true" toc="default">
	<t>A PCE or PCC implementation MAY allow the capabilities specified in Section 5.1 and the capability for support of SRPA advertised in ASSOC-Type-List TLV to be enabled and disabled.</t>
  </section>
  <section title="Information and Data Models" numbered="true" toc="default">
     <t>The PCEP YANG module <xref target="I-D.ietf-pce-pcep-yang" format="default" sectionFormat="of" derivedContent="PCEP-YANG"/> will be extended with PCEP extensions specified Section 5 of this document. <xref target="I-D.ietf-pce-pcep-srv6-yang" format="default" sectionFormat="of" derivedContent="PCEP-SRv6-YANG"/> defines YANG module with common building blocks for PCEP Extensions described in Section 4.</t>
  </section>
  <section title="Liveness Detection and Monitoring" numbered="true" toc="default">
     <t>Mechanisms defined in this document do not imply any new liveness detection and monitoring requirements in addition to those already listed in <xref target="RFC5440"/>, <xref target="RFC8664"/> and <xref target="RFC9256"/>.</t>
 </section>
  <section title="Verify Correct Operations" numbered="true" toc="default">
	<t>Operation verification requirements already listed in <xref target="RFC5440"/>, <xref target="RFC8231"/>, <xref target="RFC8664"/>, <xref target="RFC9256"/> and <xref target="RFC9603"/> are applicable to mechanisms defined in this document.</t>
	<t>An implementation MUST allow the operator to view SR Policy Identifier and SR Policy Candidate Path Identifier advertised in SRPA object.</t>
	<t>An implementation SHOULD allow the operator to view the capabilities defined in this document.</t>
	<t>An implementation SHOULD allow the operator to view LSPs associated with specific SR Policy Identifier.</t>
  </section>
  <section title="Requirements On Other Protocols" numbered="true" toc="default">
    <t>The PCEP extensions defined in this document do not imply any new requirements on other protocols.</t>
  </section>
  <section title="Impact On Network Operations" numbered="true" toc="default">
	<t>The mechanisms defined in <xref target="RFC5440"/>, <xref target="RFC8231"/>, <xref target="RFC9256"/> and <xref target="RFC9603"/> also apply to the PCEP extensions defined in this document.</t>
  </section>
</section>
<section anchor="Acknowledgement" title="Acknowledgement">
<t>
Would like to thank Ketan Talaulikar, Dhruv Dhody, Stephane Litkowski, Boris Khasanov, Abdul Rehman, Zoey Rose, Praveen Kumar and Tom Petch for review and suggestions.
</t>
</section> <!-- Acknowledgement -->

</middle>

<back>

<references title="Normative References">
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.3032.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.5440.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.7942.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8126.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8231.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8253.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8281.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8664.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.8697.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.9256.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.9325.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.9603.xml"?>
</references>
<references title="Informative References">

  <?rfc include="http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-pce-multipath.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml/reference.RFC.9604.xml"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-pce-pcep-yang"?>
  <?rfc include="http://xml.resource.org/public/rfc/bibxml3/reference.I-D.ietf-pce-pcep-srv6-yang"?>
</references>

<section title="Contributors">
    <t><figure><artwork>
Dhruv Dhody
Huawei
India

Email: dhruv.ietf@gmail.com

Cheng Li
Huawei Technologies
Huawei Campus, No. 156 Beiqing Rd.
Beijing, 10095
China

Email: chengli13@huawei.com

Zafar Ali
Cisco Systems, Inc.

Email: zali@cisco.com

Rajesh Melarcode
Cisco Systems, Inc.
2000 Innovation Dr.
Kanata, Ontario
Canada

Email: rmelarco@cisco.com

</artwork></figure></t>


</section> <!-- Contributors -->

</back>

</rfc>

